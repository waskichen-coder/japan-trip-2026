<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>東京雪國之旅 2026</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f0f9ff;
            -webkit-tap-highlight-color: transparent;
        }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.8);
        }
        
        .transport-card {
            background: #f8fafc;
            border: 1px dashed #cbd5e1;
            position: relative;
        }

        .app-input {
            width: 100%;
            background: transparent;
            border-bottom: 1px solid #e2e8f0;
            padding: 4px 0;
            outline: none;
            transition: all 0.3s;
            color: #334155;
            font-weight: 500;
            border-radius: 0;
        }
        .app-input:focus {
            border-bottom-color: #38bdf8;
        }
        .app-input::placeholder {
            color: #cbd5e1;
            font-weight: 400;
        }
        
        .toggle-checkbox:checked {
            right: 0;
            border-color: #38bdf8;
        }
        .toggle-checkbox:checked + .toggle-label {
            background-color: #38bdf8;
        }
        
        .fade-enter-active, .fade-leave-active { transition: opacity 0.3s ease, transform 0.3s ease; }
        .fade-enter-from, .fade-leave-to { opacity: 0; transform: translateY(-5px); }
    </style>
</head>
<body class="bg-sky-50 text-slate-600 antialiased selection:bg-sky-200">

    <div id="app" class="max-w-md mx-auto relative min-h-screen bg-[#f0f9ff] shadow-2xl overflow-hidden pb-10">
        
        <header class="relative w-full h-[250px] overflow-hidden group">
            <img :src="bannerImage" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105" alt="Tokyo Snow">
            <div class="absolute inset-0 bg-gradient-to-b from-slate-900/30 via-transparent to-transparent"></div>
            <div class="absolute inset-0 bg-gradient-to-t from-[#f0f9ff] to-transparent opacity-30"></div>
            
            <div class="absolute bottom-12 left-6 text-[#8FB5D8] z-20 drop-shadow-lg">
                <div class="inline-block px-2 py-0.5 border border-sky-900/30 rounded-full bg-white/30 backdrop-blur-sm mb-2">
                    <p class="text-[10px] font-medium tracking-widest uppercase">Winter Trip 2026</p>
                </div>
                <h1 class="text-3xl font-bold tracking-wide">東京・輕井澤</h1>
                <p class="text-xs font-light mt-1 opacity-90 tracking-wider">Feb 10 - Feb 16</p>
            </div>
        </header>

        <main class="relative -mt-8 z-10 bg-[#f0f9ff] rounded-t-[35px] px-5 pt-10 min-h-[calc(100vh-220px)] shadow-[0_-10px_40px_-15px_rgba(0,0,0,0.1)]">
            
            <section class="mb-10">
                <div class="flex items-center mb-4 pl-1">
                    <div class="w-1 h-4 bg-sky-400 rounded-full mr-3"></div>
                    <h2 class="text-lg font-bold text-slate-700 tracking-tight">航班資訊</h2>
                </div>
                
                <div class="glass-card rounded-2xl p-5 mb-3 border-l-4 border-sky-400">
                    <div class="flex justify-between items-center mb-3">
                        <span class="bg-sky-100 text-sky-600 text-[10px] px-2 py-1 rounded-md font-bold">去程 2/10</span>
                        <span class="text-xs text-slate-400 font-mono"><i class="fa-solid fa-plane mr-1"></i>CI 0100</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <div class="text-center">
                            <div class="text-xl font-bold text-slate-700">09:30</div>
                            <div class="text-[10px] text-slate-400 bg-slate-100 rounded-full px-2">TPE T2</div>
                        </div>
                        <i class="fa-solid fa-arrow-right-long text-sky-300"></i>
                        <div class="text-center">
                            <div class="text-xl font-bold text-slate-700">13:30</div>
                            <div class="text-[10px] text-slate-400 bg-slate-100 rounded-full px-2">NRT T2</div>
                        </div>
                    </div>
                </div>

                <div class="glass-card rounded-2xl p-5 border-l-4 border-pink-300">
                    <div class="flex justify-between items-center mb-3">
                        <span class="bg-pink-50 text-pink-500 text-[10px] px-2 py-1 rounded-md font-bold">回程 2/16</span>
                        <span class="text-xs text-slate-400 font-mono"><i class="fa-solid fa-plane mr-1"></i>CI 0105</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <div class="text-center">
                            <div class="text-xl font-bold text-slate-700">17:45</div>
                            <div class="text-[10px] text-slate-400 bg-slate-100 rounded-full px-2">NRT T2</div>
                        </div>
                        <i class="fa-solid fa-arrow-right-long text-pink-300"></i>
                        <div class="text-center">
                            <div class="text-xl font-bold text-slate-700">20:55</div>
                            <div class="text-[10px] text-slate-400 bg-slate-100 rounded-full px-2">TPE T2</div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-10">
                <div class="flex items-center justify-between mb-4 pl-1">
                    <div class="flex items-center">
                        <div class="w-1 h-4 bg-sky-400 rounded-full mr-3"></div>
                        <h2 class="text-lg font-bold text-slate-700 tracking-tight">住宿安排</h2>
                    </div>
                    <transition name="fade">
                        <span v-if="savedStatus" class="text-[10px] text-emerald-500 font-medium flex items-center bg-emerald-50 px-2 py-1 rounded-full">
                            <i class="fa-solid fa-check mr-1"></i>已儲存
                        </span>
                    </transition>
                </div>

                <transition-group name="fade">
                    <div v-for="(hotel, index) in hotels" :key="hotel.id" class="glass-card rounded-2xl p-5 mb-4 relative group">
                        <button @click="removeHotel(index)" class="absolute top-3 right-3 text-slate-300 hover:text-red-400 p-2 transition-colors">
                            <i class="fa-regular fa-trash-can"></i>
                        </button>

                        <div class="flex items-center mb-3">
                            <div class="w-6 h-6 rounded-full bg-indigo-50 flex items-center justify-center mr-2 text-indigo-400">
                                <i class="fa-solid fa-bed text-[10px]"></i>
                            </div>
                            <span class="text-[10px] font-bold text-indigo-400 tracking-wider">HOTEL {{ index + 1 }}</span>
                        </div>

                        <div class="space-y-3">
                            <div>
                                <label class="text-[10px] text-slate-400 font-bold block mb-1">飯店名稱</label>
                                <input v-model="hotel.name" type="text" class="app-input text-base" placeholder="輸入飯店名稱">
                            </div>
                            <div class="flex space-x-3">
                                <div class="w-2/3">
                                    <label class="text-[10px] text-slate-400 font-bold block mb-1">日期</label>
                                    <input v-model="hotel.date" type="text" class="app-input text-sm" placeholder="2/10 - 2/12">
                                </div>
                                <div class="w-1/3">
                                    <label class="text-[10px] text-slate-400 font-bold block mb-1">房號</label>
                                    <input v-model="hotel.room" type="text" class="app-input text-sm text-center" placeholder="--">
                                </div>
                            </div>
                        </div>
                    </div>
                </transition-group>

                <button @click="addHotel" class="w-full py-3 rounded-xl border-2 border-dashed border-sky-200 text-sky-400 font-medium text-xs hover:bg-sky-50 transition-all flex items-center justify-center">
                    <i class="fa-solid fa-plus mr-1"></i> 新增住宿
                </button>
            </section>

            <section>
                <div class="flex items-center justify-between mb-6 pl-1 sticky top-0 bg-[#f0f9ff]/90 backdrop-blur-sm z-30 py-2">
                    <div class="flex items-center">
                        <div class="w-1 h-4 bg-sky-400 rounded-full mr-3"></div>
                        <h2 class="text-lg font-bold text-slate-700 tracking-tight">每日行程</h2>
                    </div>
                    
                    <div class="flex items-center">
                        <span class="text-[10px] text-slate-400 mr-2">{{ showAllTransports ? '編輯交通' : '隱藏空白' }}</span>
                        <div class="relative inline-block w-8 h-4 align-middle select-none transition duration-200 ease-in">
                            <input type="checkbox" v-model="showAllTransports" class="toggle-checkbox absolute block w-4 h-4 rounded-full bg-white border-4 appearance-none cursor-pointer border-slate-300"/>
                            <label class="toggle-label block overflow-hidden h-4 rounded-full bg-slate-300 cursor-pointer"></label>
                        </div>
                    </div>
                </div>

                <div class="space-y-0 pb-12">
                    <div v-for="(day, index) in itinerary" :key="index" class="relative pl-4">
                        
                        <div class="absolute left-[22px] top-4 bottom-[-20px] w-[2px] bg-sky-100 z-0"></div>
                        
                        <div class="relative z-10 mb-6">
                            <div class="absolute left-[-4px] top-6 w-3 h-3 rounded-full bg-sky-400 ring-4 ring-[#f0f9ff]"></div>
                            
                            <div class="glass-card rounded-xl p-5 ml-4 hover:shadow-lg transition-all duration-300">
                                <div class="flex justify-between items-start mb-3">
                                    <div class="flex items-baseline">
                                        <span class="text-sky-600 font-bold text-xl mr-2">{{ day.date }}</span>
                                        <span class="text-slate-400 text-xs font-medium bg-slate-100 px-1.5 py-0.5 rounded">{{ day.weekday }}</span>
                                    </div>
                                    <button @click="openMap(day.location)" class="bg-sky-50 text-sky-500 text-[10px] font-bold px-3 py-1.5 rounded-full flex items-center border border-sky-100 active:bg-sky-100">
                                        <i class="fa-solid fa-location-arrow mr-1"></i> 導航
                                    </button>
                                </div>
                                <h3 class="font-bold text-slate-700 mb-2 leading-tight">{{ day.title }}</h3>
                                <p class="text-xs text-slate-500 leading-relaxed mb-3">{{ day.desc }}</p>
                                <div class="pt-3 border-t border-slate-50 flex items-center text-[10px] text-slate-400">
                                    <i class="fa-solid fa-suitcase mr-1.5 text-sky-300"></i>
                                    {{ day.note }}
                                </div>
                            </div>
                        </div>

                        <div v-if="index < itinerary.length - 1 && transports[index]">
                            <div v-show="showAllTransports || (transports[index].code || transports[index].time)" 
                                 class="relative z-10 mb-6 ml-4">
                                
                                <div class="absolute -left-[23px] top-1/2 -translate-y-1/2 w-4 h-[1px] bg-sky-200"></div>
                                <div class="absolute -left-[26px] top-1/2 -translate-y-1/2 w-1.5 h-1.5 rounded-full bg-sky-200"></div>

                                <div class="transport-card rounded-lg p-3 flex items-center justify-between">
                                    <div class="flex items-center flex-1 mr-2">
                                        <div class="w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center mr-3 flex-shrink-0 text-slate-500">
                                            <i class="fa-solid fa-train-subway text-xs"></i>
                                        </div>
                                        <div class="w-full">
                                            <input v-model="transports[index].code" placeholder="輸入車次 (例如: 新幹線 605)" class="text-xs font-bold text-slate-700 bg-transparent w-full outline-none placeholder-slate-300 mb-1">
                                            <input v-model="transports[index].time" placeholder="輸入時間 (10:00 - 11:20)" class="text-[10px] text-slate-500 bg-transparent w-full outline-none placeholder-slate-300">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </section>

            <footer class="mt-8 text-center pb-8">
                <i class="fa-solid fa-snowflake text-sky-200 text-2xl mb-2 animate-pulse"></i>
                <p class="text-slate-300 text-[10px] tracking-widest uppercase">Safe Travels</p>
            </footer>

        </main>
    </div>

    <script>
        const { createApp } = Vue

        createApp({
            data() {
                return {
                    bannerImage: './1767939240519.jpg', 
                    savedStatus: false,
                    showAllTransports: true,
                    
                    hotels: [
                        { id: 1, name: '輕井澤王子飯店', date: '2/10 - 2/12', room: '' },
                        { id: 2, name: '', date: '2/12 - 2/16', room: '' }
                    ],

                    itinerary: [
                        { date: '2/10', weekday: 'Mon', title: '東京 ➔ 輕井澤', desc: '抵達東京後搭乘新幹線前往輕井澤。下午前往王子購物廣場 (Outlet) 逛街。', location: 'Karuizawa Prince Shopping Plaza', note: '宿：輕井澤' },
                        { date: '2/11', weekday: 'Tue', title: '輕井澤深度遊', desc: '雲場池散策、舊輕井澤銀座通逛街吃美食、參觀石之教會。', location: 'Kumoba Pond, Karuizawa', note: '宿：輕井澤' },
                        { date: '2/12', weekday: 'Wed', title: '雪上活動 & 返回東京', desc: '王子飯店滑雪場/雪上樂園體驗。下午搭乘新幹線返回東京市區。', location: 'Karuizawa Prince Hotel Ski Resort', note: '宿：東京' },
                        { date: '2/13', weekday: 'Thu', title: '河口湖一日遊', desc: '欣賞富士山絕景、搭乘天上山纜車、日川時計店拍照。', location: 'Lake Kawaguchi', note: '宿：東京' },
                        { date: '2/14', weekday: 'Fri', title: '東京市區浪漫行', desc: '澀谷展望台 (SHIBUYA SKY) 看夕陽，晚上享用情人節氣氛晚餐。', location: 'SHIBUYA SKY', note: '宿：東京' },
                        { date: '2/15', weekday: 'Sat', title: '東京經典巡禮', desc: '築地市場吃海鮮、淺草寺參拜、欣賞晴空塔。', location: 'Asakusa Senso-ji', note: '宿：東京' },
                        { date: '2/16', weekday: 'Sun', title: '東京 ➔ 溫暖的家', desc: '最後採買伴手禮，前往成田機場搭機返台。', location: 'Narita International Airport Terminal 2', note: '平安返家' }
                    ],

                    transports: [] 
                }
            },
            // 修改點：使用 created 確保在畫面渲染前資料就準備好
            created() {
                this.initTransports();
                this.loadData();
            },
            watch: {
                hotels: {
                    handler(newVal) {
                        localStorage.setItem('trip-hotels-v3', JSON.stringify(newVal));
                        this.triggerSave();
                    },
                    deep: true
                },
                transports: {
                    handler(newVal) {
                        localStorage.setItem('trip-transports-v1', JSON.stringify(newVal));
                        this.triggerSave();
                    },
                    deep: true
                }
            },
            methods: {
                initTransports() {
                    // 初始化交通陣列，確保長度正確
                    const gaps = this.itinerary.length - 1;
                    // 如果目前是空的，先填滿
                    while(this.transports.length < gaps) {
                        this.transports.push({ code: '', time: '' });
                    }
                },
                loadData() {
                    const savedHotels = localStorage.getItem('trip-hotels-v3');
                    if (savedHotels) this.hotels = JSON.parse(savedHotels);

                    const savedTransports = localStorage.getItem('trip-transports-v1');
                    if (savedTransports) {
                        const loaded = JSON.parse(savedTransports);
                        // 合併資料：保留舊資料，但確保長度跟現在行程一樣
                        for(let i=0; i < this.transports.length; i++) {
                            if(loaded[i]) {
                                this.transports[i] = loaded[i];
                            }
                        }
                    }
                },
                openMap(location) {
                    const query = encodeURIComponent(location);
                    window.open(`https://www.google.com/maps/search/?api=1&query=${query}`, '_blank');
                },
                addHotel() {
                    this.hotels.push({ id: Date.now(), name: '', date: '', room: '' });
                },
                removeHotel(index) {
                    if(confirm('確定刪除此住宿？')) this.hotels.splice(index, 1);
                },
                triggerSave() {
                    this.savedStatus = true;
                    setTimeout(() => this.savedStatus = false, 2000);
                }
            }
        }).mount('#app')
    </script>
</body>
</html>


